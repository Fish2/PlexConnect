function log(e,t){t=t||1;var n=new XMLHttpRequest,a="{{URL(/)}}&PlexConnectATVLogLevel="+t.toString()+"&PlexConnectLog="+encodeURIComponent(e);n.open("GET",a,!0),n.send()}function markItem(e,t,n,a){var o=e+"/:/"+a+"?key="+n+"&identifier=com.plexapp.plugins.library";""!=t&&(o=o+"&X-Plex-Token="+t);var r=new XMLHttpRequest;r.open("GET",o,!1),r.send()}function deleteItem(e,t,n){var a=e+"/library/metadata/"+n;""!=t&&(a=a+"?X-Plex-Token="+t);var o=new XMLHttpRequest;o.open("DELETE",a,!1),o.send()}function changeArtwork(e,t,n,a,o){if(""!=o&&"fanart"!=o){var r=(document.rootElement,document.getElementById(o));if(null==r)return;var l=r.getElementsByTagName("moviePoster");if(null==l)return;for(var i=0;i<l.length;i++)l[i].getAttribute("id")==a?l[i].getElementByTagName("title").textContent="Selected":l[i].getElementByTagName("title").textContent=""}if(-1!==a.indexOf("library")){a=a.split("=")[1]}else a=encodeURIComponent(a);if("fanart"!=o)var m=e+"/library/metadata/"+n+"/poster?url="+a;else var m=e+"/library/metadata/"+n+"/art?url="+a;""!=t&&(m=m+"&X-Plex-Token="+t);var u=new XMLHttpRequest;u.open("PUT",m,!0),u.send()}function scrobbleMenu(e){if(fv=atv.device.softwareVersion.split("."),firmVer=fv[0]+"."+fv[1],log(firmVer),parseFloat(firmVer)<6)atv.loadURL(e);else{var e=e+"&PlexConnectUDID="+atv.device.udid,t=new XMLHttpRequest;t.onreadystatechange=function(){try{4==t.readyState&&(xml=t.responseText,-1!==xml.indexOf("popUpMenu")?(xmlDoc=atv.parseXML(xml),atv.contextMenu.load(xmlDoc)):(xmlDoc=atv.parseXML(xml),atv.loadXML(xmlDoc)),xmlDoc=atv.parseXML(xml),atv.contextMenu.load(xmlDoc))}catch(e){t.abort()}},t.open("GET",unescape(e),!1),t.send()}}function updateContextXML(){xmlstr='<atv><body><optionList id="fakeUpdater" autoSelectSingleItem="true">             <items><oneLineMenuItem id="0" onSelect="atv.unloadPage()"><label></label>             </oneLineMenuItem></items></optionList></body></atv>',xmlDoc=atv.parseXML(xmlstr),atv.loadXML(xmlDoc)}atv.Document&&(atv.Document.prototype.getElementById=function(e){var t=this.evaluateXPath("//*[@id='"+e+"']",this);if(t&&t.length>0)return t[0]}),atv.Element&&(atv.Element.prototype.getElementsByTagName=function(e){return this.ownerDocument.evaluateXPath("descendant::"+e,this)},atv.Element.prototype.getElementByTagName=function(e){var t=this.getElementsByTagName(e);if(t&&t.length>0)return t[0]}),String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return void 0!==e[n]?e[n]:t})});